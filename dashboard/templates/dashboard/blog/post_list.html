{% extends "dashboard/base.html" %}
{% load i18n static %}

{% block content %}
<h2>{% trans "Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª" %}</h2>

<a class="btn btn-primary mb-3" href="{% url 'dashboard:add_post' %}">â• {% trans "Ø¥Ø¶Ø§ÙØ© Ù…Ù‚Ø§Ù„Ø©" %}</a>

<form method="post" action="{% url 'dashboard:confirm_bulk_delete' %}">
  {% csrf_token %}
  <table class="table table-bordered">
      <thead>
          <tr>
              <th><input type="checkbox" id="select-all"></th>
              <th>{% trans "Ø§Ù„Ø¹Ù†ÙˆØ§Ù†" %}</th>
              <th>{% trans "ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ø´Ø±" %}</th>
              <th>{% trans "Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª" %}</th>
          </tr>
      </thead>
      <tbody>
          {% for post in posts %}
          <tr>
              <td><input type="checkbox" name="selected_posts" value="{{ post.id }}"></td>
              <td>{{ post.title }}</td>
              <td>{{ post.created_at|date:"Y-m-d" }}</td>
              <td>
                  <a class="btn btn-sm btn-warning" href="{% url 'dashboard:edit_post' post.id %}">{% trans "ØªØ¹Ø¯ÙŠÙ„" %}</a>
                  <a class="btn btn-sm btn-danger" href="{% url 'dashboard:delete_post' post.id %}">{% trans "Ø­Ø°Ù" %}</a>
              </td>
          </tr>
          {% empty %}
          <tr>
              <td colspan="4">{% trans "Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù‚Ø§Ù„Ø§Øª Ø­Ø§Ù„ÙŠÙ‹Ø§." %}</td>
          </tr>
          {% endfor %}
      </tbody>
  </table>

  <button type="submit" class="btn btn-danger mt-2">{% trans "ğŸ—‘ Ø­Ø°Ù Ø§Ù„Ù…Ø­Ø¯Ø¯" %}</button>
</form>

<script>
document.addEventListener('DOMContentLoaded', function () {
  const selectAll = document.getElementById('select-all');
  const checkboxes = document.querySelectorAll('input[name="selected_posts"]');
  if (selectAll) {
    selectAll.addEventListener('change', function () {
      checkboxes.forEach(cb => cb.checked = selectAll.checked);
    });
  }
});
</script>
{% endblock %}
